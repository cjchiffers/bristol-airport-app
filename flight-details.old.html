
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, proxy-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Flight Details</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="flight-details.css" />
</head>

<body class="details-page">
  <header class="topbar details-topbar">
    <button class="icon-btn" id="backBtn" aria-label="Back">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15.5 19.5 8 12l7.5-7.5" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
    </button>

    <div class="details-title">
      <div class="details-headline" id="headline">Loading‚Ä¶</div>
      <div class="details-subhead" id="subhead">‚Äî</div>
    </div>

    <button class="icon-btn" id="overflowDetailsBtn" aria-haspopup="menu" aria-expanded="false" aria-label="More">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 5.2a1.9 1.9 0 1 1 0 3.8 1.9 1.9 0 0 1 0-3.8Zm0 6.9a1.9 1.9 0 1 1 0 3.8 1.9 1.9 0 0 1 0-3.8Zm0 6.9a1.9 1.9 0 1 1 0 3.8 1.9 1.9 0 0 1 0-3.8Z" fill="currentColor"/></svg>
    </button>

    <div class="menu" id="detailsMenu" role="menu" aria-label="Flight actions">
      <button class="menu-item" id="refreshBtn" role="menuitem">Refresh</button>
      <button class="menu-item" id="autoBtn" role="menuitemcheckbox" aria-checked="true" aria-pressed="true">Auto-refresh: On</button>
      <button class="menu-item" id="compactBtn" role="menuitem">Focus mode</button>
      <button class="menu-item" id="groupBtn" role="menuitem">Group mode</button>
      <div class="menu-sep" role="separator"></div>
      <button class="menu-item" id="notifyBtn" role="menuitem">Notify me</button>
      <button class="menu-item" id="calendarBtn" role="menuitem">Add to calendar</button>
      <button class="menu-item" id="shareBtn" role="menuitem">Share</button>
    </div>
  </header>

  <main class="container details-container">
    <div class="details-meta">
      <span id="lastUpdated">‚Äî</span>
      <span class="dot">‚Ä¢</span>
      <span id="sourceLine">‚Äî</span>
      <span class="spacer"></span>
      <span id="statusBadge" class="status-chip">‚Äî</span>
    </div>

    <section class="card details-hero">
      <div class="hero-grid">
        <div class="kv-block">
          <div class="kv-title">Departure</div>
          <div class="kv" id="depKv"></div>
        </div>
        <div class="kv-block">
          <div class="kv-title">Arrival</div>
          <div class="kv" id="arrKv"></div>
        </div>
      </div>

      <div class="kpis" id="kpis"></div>

      <div class="leave-wrap">
        <div class="leave-card" id="leaveCard"></div>
      </div>

      <div class="inbound-line small" id="inboundLinkLine" style="display:none;"></div>
    </section>

    <section class="card details-card">
      <div class="card-h">
        <div class="h-title">Airline & aircraft</div>
        <div class="h-sub small">Operator, aircraft type and photos (when available)</div>
      </div>

      <div class="airline-row">
        <img id="airlineLogo" class="airline-logo" alt="" />
        <div class="airline-text">
          <div class="airline-name" id="airlineName">‚Äî</div>
          <div class="small" id="airlineCodeLine">‚Äî</div>
        </div>
      </div>

      <div class="aircraft-row">
        <div>
          <div class="aircraft-type" id="aircraftType">‚Äî</div>
          <div class="small" id="aircraftReg">‚Äî</div>
        </div>
        <div class="small map-hint" id="mapHint">‚Äî</div>
      </div>

      <div class="aircraft-image-wrap" id="aircraftImageWrap" style="display:none;">
        <img id="aircraftImage" class="aircraft-image" alt="Aircraft" />
        <div class="small" id="aircraftImageCredit"></div>
      </div>
    </section>

    <section class="card details-card">
      <div class="card-h">
        <div class="h-title">Route</div>
        <div class="h-sub small">Tap to zoom ‚Äî pinch gestures supported in most browsers</div>
      </div>
      <div class="route-wrap">
        <svg id="routeSvg" viewBox="0 0 1000 420" preserveAspectRatio="none" aria-label="Route map"></svg>
      </div>
    </section>

    <section class="card details-card">
      <div class="card-h">
        <div class="h-title">Weather</div>
        <div class="h-sub small" id="wxHint">‚Äî</div>
      </div>
      <div id="weatherBox"></div>
    </section>

    <details class="card details-card raw">
      <summary>Raw JSON</summary>
      <pre id="rawJson"></pre>
    </details>
  </main>

  <div class="modal-backdrop" id="groupModal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="groupTitle">
      <div class="modal-header">
        <div>
          <div class="modal-title" id="groupTitle">Group mode</div>
          <div class="small" id="groupSubtitle">‚Äî</div>
        </div>
        <div class="modal-actions">
          <button class="btn" id="groupShareBtn" type="button">Share</button>
          <button class="btn ghost" id="groupCloseBtn" type="button">Close</button>
        </div>
      </div>
      <div class="modal-body">
        <div class="countdown-big" id="groupCountdown">‚Äî</div>
        <div class="countdown-sub" id="groupNext">‚Äî</div>
        <div class="pills-row" id="groupPills"></div>
        <div class="small tip">Tip: add this app to your home screen for an app-like experience.</div>
      </div>
    </div>
  </div>

  <script src="flight-details.js"></script>

</body>
</html>

<script>
document.addEventListener('DOMContentLoaded', function () {

async function fetchWeather(lat, lon) {
    const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=temperature_2m_max,temperature_2m_min,weathercode&timezone=Europe/London`;
    const res = await fetch(url);
    const data = await res.json();

    let forecastHtml = '';
    data.daily.time.forEach((date, i) => {
        forecastHtml += `
            <p>${date}: üå°Ô∏è Max: ${data.daily.temperature_2m_max[i]}¬∞C, Min: ${data.daily.temperature_2m_min[i]}¬∞C</p>
        `;
    });

    const forecastElement = document.getElementById('forecast');
    if (forecastElement) {
        forecastElement.innerHTML = forecastHtml;
    }
}

// Example: Fetch weather for London (coordinates 51.5074, -0.1278)
fetchWeather(51.5074, -0.1278);  // Change this to the destination's coordinates

});
</script>
